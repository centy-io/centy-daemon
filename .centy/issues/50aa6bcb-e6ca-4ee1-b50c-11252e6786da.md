---
displayNumber: 141
status: open
priority: 1
createdAt: 2026-02-05T23:36:02.007183+00:00
updatedAt: 2026-02-05T23:36:02.007183+00:00
---

# Remove features module - delegate to external CLI

## Summary

Remove the entire features system (feature compaction, migrations, instructions) from the daemon. This functionality will be managed by the external CLI instead.

## What to Remove

### Source Files

* `src/features/` directory (4 files: `mod.rs`, `types.rs`, `crud.rs`, `instruction.rs`)

### Server Handlers

* 7 RPC handlers in `src/server/mod.rs` (lines ~2606-2749):
  * `get_feature_status`
  * `list_uncompacted_issues`
  * `get_instruction`
  * `get_compact`
  * `update_compact`
  * `save_migration`
  * `mark_issues_compacted`

### Proto Definitions (`proto/centy.proto`)

* 7 RPC endpoints (lines ~207-228)
* 13 message types (lines ~1401-1471): `GetFeatureStatusRequest/Response`, `ListUncompactedIssuesRequest/Response`, `GetInstructionRequest/Response`, `GetCompactRequest/Response`, `UpdateCompactRequest/Response`, `SaveMigrationRequest/Response`, `MarkIssuesCompactedRequest/Response`

### Issue Metadata Fields

* `compacted: bool` and `compacted_at: Option<String>` from `IssueFrontmatter` and `IssueMetadata` in `src/item/entities/issue/metadata.rs`
* Proto `Issue` message fields: `compacted` (field 8) and `compacted_at` (field 9)

### Search Support

* `Field::Compacted` variant in `src/search/ast.rs`
* `"compacted"` parsing in `src/search/parser.rs`
* `Field::Compacted` evaluation in `src/search/evaluator.rs`

### Library Exports

* Features re-exports in `src/lib.rs`

## Reason

The features/compaction system will be managed by the external Centy CLI rather than the daemon. This simplifies the daemonâ€™s responsibilities and keeps it focused on core issue/item management.
