---
displayNumber: 193
status: open
priority: 2
createdAt: 2026-02-15T20:03:31.027296+00:00
updatedAt: 2026-02-15T20:03:31.027296+00:00
---

# Add CreateItemType gRPC and logic for dynamic item type creation

## Summary

Add the ability to create new item types dynamically via a `CreateItemType` gRPC endpoint. Currently, item types (issues, docs) are either hardcoded defaults or require manually creating a `config.yaml` file under `.centy/<plural>/`. We need a proper API to create custom item types programmatically.

## Context

The system already has:

* `ItemTypeConfig` struct with name, plural, identifier, features, statuses, priority levels, and custom fields (`src/config/item_type_config.rs`)
* `ItemTypeRegistry` that discovers types by scanning `.centy/*/config.yaml`
* `write_item_type_config()` helper that writes a config to disk
* Generic CRUD RPCs (`CreateItem`, `GetItem`, etc.) that work with any item type via `item_type` field
* A closed RFC (GitHub #47) discussing custom entity types

## Requirements

### Proto Definition

* Add `CreateItemType` RPC to the `CentyDaemon` service in `centy.proto`
* Define `CreateItemTypeRequest` and `CreateItemTypeResponse` messages
* Request fields should map to `ItemTypeConfig`:
  * `name` (string, required) — singular display name (e.g., “Bug”, “Task”, “Epic”)
  * `plural` (string, required) — folder/type key (e.g., “bugs”, “tasks”, “epics”)
  * `identifier` (string, required) — “uuid” or “slug”
  * `features` (message) — toggle-able features (display_number, status, priority, assets, org_sync, move, duplicate)
  * `statuses` (repeated string) — allowed statuses
  * `default_status` (string, optional) — default status for new items
  * `priority_levels` (uint32, optional) — number of priority levels
  * `custom_fields` (repeated CustomFieldDefinition)
* Response should return the created `ItemTypeConfig`

### Handler Logic (`src/server/handlers/`)

* Create `item_type_create.rs` handler
* Validate inputs:
  * `name` and `plural` must not be empty
  * `plural` must be a valid folder name (lowercase, alphanumeric + hyphens)
  * No duplicate type name or plural (check against `ItemTypeRegistry`)
  * `identifier` must be “uuid” or “slug”
  * `default_status` must be in `statuses` list (if provided)
  * `priority_levels` must be > 0 (if provided)
* Create the `.centy/<plural>/` directory
* Write `config.yaml` via `write_item_type_config()`
* Rebuild/update the `ItemTypeRegistry`

### Post-Creation

* After creating the type, the existing generic RPCs (`CreateItem`, `ListItems`, etc.) should work with the new type immediately
* Update the manifest timestamp

## Out of Scope (for now)

* UpdateItemType / DeleteItemType RPCs (follow-up issues)
* ListItemTypes / GetItemType RPCs (follow-up issues)
* Migration of items when type config changes
