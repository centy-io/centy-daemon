---
displayNumber: 106
status: open
priority: 2
createdAt: 2026-01-09T17:27:48.343243+00:00
updatedAt: 2026-01-09T17:27:48.343243+00:00
---

# Refactor git operations to use gix crate

Replace subprocess-based git operations with the pure Rust gix library.

## Current State

The codebase currently uses `Command::new("git")` to spawn git subprocesses across multiple files:

* `src/sync/worktree.rs` - worktree management
* `src/sync/branch.rs` - branch operations
* `src/pr/git.rs` - PR-related git commands

There are approximately 56+ `Command::new()` invocations for git operations throughout the codebase.

## Proposed Change

Migrate from subprocess-based git operations to the `gix` crate (formerly gitoxide) - a pure Rust Git implementation.

## Benefits

* **Performance**: Eliminate subprocess overhead for every git operation
* **Type Safety**: Get compile-time guarantees instead of parsing string output
* **Error Handling**: Better structured errors vs parsing git stderr
* **Cross-platform**: More reliable behavior across different platforms
* **Testing**: Easier to test without mocking subprocess calls

## Files to Update

* `src/sync/worktree.rs`
* `src/sync/branch.rs`
* `src/pr/git.rs`
* Any other files using git subprocess calls

## Implementation Notes

* Start with simpler operations (rev-parse, status) and migrate incrementally
* Keep subprocess fallback for complex operations if gix doesnâ€™t support them
* Consider a thin wrapper module to abstract git operations
