---
displayNumber: 105
status: open
priority: 2
createdAt: 2026-01-09T17:27:23.268025+00:00
updatedAt: 2026-02-15T16:23:48.358518+00:00
---

# Add common trait interface for Issues, PRs, and Docs

## Background

Currently, Issues, PRs, and Docs share similar capabilities but lack a unified trait interface:

| Field | Issue | PR | Doc |
|-------|-------|----|-----|
| created_at | via CommonMetadata | via CommonMetadata | direct |
| updated_at | via CommonMetadata | via CommonMetadata | direct |
| deleted_at | direct | direct | direct |
| display_number | via CommonMetadata | via CommonMetadata | none |
| status | via CommonMetadata | via CommonMetadata | none |
| priority | via CommonMetadata | via CommonMetadata | none |
| is_org_X | yes | no | yes |
| org_slug | yes | no | yes |

## Problem

1. CommonMetadata is shared by Issue/PR but NOT by Doc
2. deleted_at is duplicated in ALL THREE types (not centralized in CommonMetadata)
3. No unified trait interface for common operations
4. OrgSyncable trait exists but only Issues implement it (Docs do manual sync)

## Context: config.yaml approach

This issue is Phase 1a of the item-agnostic migration (#164). The trait interfaces built here become the foundation for the config.yaml-driven item type system (#135), where each item type is defined by .centy/<type>/config.yaml and the daemon treats all types generically via these traits.

## Proposed Solution (Smallest Scope)

Add two minimal traits that capture the true intersection of all item types:

```rust
// 1. Timestamps — ALL items have these
pub trait Timestamped {
    fn created_at(&self) -> &str;
    fn updated_at(&self) -> &str;
    fn touch(&mut self);  // Update updated_at to now
}

// 2. Soft-delete — ALL items have this
pub trait SoftDeletable: Timestamped {
    fn deleted_at(&self) -> Option<&str>;
    fn is_deleted(&self) -> bool { self.deleted_at().is_some() }
    fn soft_delete(&mut self);
    fn restore(&mut self);
}
```

## Benefits

* 2 traits covering the true intersection of all types
* Zero breaking changes to existing code
* Foundation for the generic item system driven by config.yaml feature flags
* Immediate value — enables generic functions

## Implementation Steps

1. Create Timestamped trait in src/common/traits.rs
2. Create SoftDeletable trait extending Timestamped
3. Implement both traits for Issue
4. Implement both traits for PullRequest
5. Implement both traits for Doc
6. Add deleted_at to CommonMetadata (optional consolidation)
7. Update Docs to use OrgSyncable trait instead of manual sync

## Future Extensions

Once the base traits are in place, the config.yaml system (#135) uses them to provide generic CRUD:
* CentyItem trait for unified CRUD
* Numbered trait for display_number support (config.yaml feature flag: displayNumber)
* Prioritized trait for priority support (config.yaml feature flag: priority)
* Unified gRPC API layer accepting string item_type
