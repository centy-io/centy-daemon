---
displayNumber: 164
status: open
priority: 1
createdAt: 2026-02-15T16:14:34.962843+00:00
updatedAt: 2026-02-15T16:30:17.126499+00:00
---

# Make the daemon item-agnostic (tracking issue)

Master tracking issue for removing hardcoded item types and replacing them with a fully configurable, generic item system defined by .centy/<item>/config.yaml files.

## Design Decision

Each item type is defined by a config.yaml file inside .centy/<type>/. The daemon discovers types at startup by scanning .centy/*/config.yaml. Built-in types (issue, doc) are created by centy init with default config.yaml files â€” same system as custom types.

## Phased Plan with Sub-issues

### Phase 1a: Common trait interfaces (#105)
- #166 Create Timestamped and SoftDeletable traits
- #167 Implement Timestamped and SoftDeletable for Issue
- #168 Implement Timestamped and SoftDeletable for Doc
- #169 Consolidate deleted_at into CommonMetadata
- #170 Implement OrgSyncable trait for Doc

### Phase 1b: Config-driven item type registry (#135)
- #171 Define config.yaml schema for item types
- #172 Implement item type registry scanning .centy/*/config.yaml
- #173 Update centy init to create issues/ and docs/ config.yaml
- #174 Add migration to insert config.yaml into existing projects
- #176 Replace hardcoded ItemType enum with dynamic registry lookup

### Phase 1b (parallel): Remove PR entity type (#162)
- #181 Remove PR entity source code and handlers
- #182 Remove PR proto definitions and message types
- #183 Remove PR tests and e2e specs
- #184 Remove PR from init and data references

### Phase 2a: Generic storage + unified gRPC (#130)
- #177 Generic storage layer for config-driven item types
- #178 Replace gRPC ItemType enum with string item_type field
- #179 Collapse per-entity gRPC RPCs into generic CRUD RPCs
- #180 Field validation based on config.yaml schema

### Phase 2b-d: Core systems (parallel after Phase 2a)
- #138 Configurable editor support
- #33 Entity-agnostic conversations
- #137 Custom lifecycle hooks (closed)
- #150 Add e2e tests for lifecycle hooks

### Phase 3: Extensions
- #139 Custom templates per item type
- #140 Custom commands per item type

## Dependency Graph

```
Phase 1a (#166-#170: traits)
  + #162 (#181-#184: remove PR)
    |
    v
Phase 1b (#171-#176: config.yaml registry)
    |
    v
Phase 2a (#177-#180: generic storage + gRPC)
    |
    +---> #138 Editor config
    +---> #33 Entity-agnostic conversations
    +---> #150 Hook e2e tests
              |
              +---> #139 Custom templates
              +---> #140 Custom commands
```
