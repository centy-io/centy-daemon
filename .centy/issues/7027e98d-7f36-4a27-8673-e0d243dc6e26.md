---
displayNumber: 145
status: open
priority: 3
createdAt: 2026-02-06T00:28:13.920337+00:00
updatedAt: 2026-02-06T00:28:13.920337+00:00
---

# lint: enable clippy::arithmetic_side_effects to prevent overflow panics

Integer arithmetic operations (addition, subtraction, multiplication) can panic in debug builds on overflow/underflow, and silently wrap in release builds. Neither behavior is desirable for a long-running daemon.

Example in the codebase:

* src/search/parser.rs:219 — raw.len() - 1 would underflow (panic in debug, wrap to usize::MAX in release) if raw were empty. The pest parser grammar likely prevents this, but it is not enforced at the type level.

The arithmetic_side_effects lint catches unvalidated arithmetic and encourages using checked/saturating operations.

Proposal: Add arithmetic_side_effects = “warn” to Cargo.toml \[lints.clippy\], then promote to deny for non-test code. Use safe alternatives like raw.len().checked_sub(1).ok_or(Error::EmptyInput)? or raw.len().saturating_sub(1).
