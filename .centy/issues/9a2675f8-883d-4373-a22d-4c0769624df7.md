---
displayNumber: 197
status: in-progress
priority: 2
createdAt: 2026-02-16T10:26:49.440508+00:00
updatedAt: 2026-02-16T23:36:00.306318+00:00
---

# Remove agent logic from the daemon — keep editor opening

The daemon currently contains logic for launching AI agents in terminal windows. The agent-launching responsibility does not belong in the daemon — it should be handled by the client (CLI/desktop app). The daemon should be able to **open the editor/terminal** but should **never run anything inside it**.

## Guiding principle

The daemon can open editor/terminal windows, but all logic that executes commands or agents inside them must be removed. The client is responsible for deciding what to run.

## What to remove

### Agent orchestration handlers

* `src/server/handlers/workspace_agent.rs` — `open_agent_in_terminal()` handler
* `src/server/handlers/workspace_agent_open.rs` — `open_workspace_and_terminal()` orchestration

### Agent launching logic

* `src/workspace/terminal.rs` — `open_terminal_with_agent()` function (keep `open_terminal()` and other plain terminal-opening utilities)
* `src/workspace/mod.rs` — re-export of `open_terminal_with_agent`

### gRPC API (agent-specific)

* `OpenAgentInTerminal` RPC endpoint in `proto/centy/v1/centy.proto`
* `OpenAgentInTerminalRequest` and `OpenAgentInTerminalResponse` message types
* `WorkspaceMode` enum (if only used by the agent flow)

### gRPC trait implementation

* `src/server/trait_impl.rs` — `open_agent_in_terminal()` impl

### Configuration

* `workspace.update_status_on_open` setting in `src/config/mod.rs` (`WorkspaceConfig`) if it only serves the agent flow

### Documentation

* `.centy/docs/agent-manager.md` — agent manager design doc

## What to keep

* `open_terminal()`, `is_terminal_available()`, `open_platform_terminal()` — plain terminal/editor opening without executing anything inside
* Any RPC or handler that only opens an editor window (no agent execution)

## Notes

* Ensure no other handlers or CLI commands depend on the removed code before deleting
* After cleanup, verify that the remaining terminal-opening code does not pass any commands or agent arguments
