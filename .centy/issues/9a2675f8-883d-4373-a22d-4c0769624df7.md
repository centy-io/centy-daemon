---
displayNumber: 197
status: open
priority: 2
createdAt: 2026-02-16T10:26:49.440508+00:00
updatedAt: 2026-02-16T10:26:49.440508+00:00
---

# Remove agent logic from the daemon

The daemon currently contains logic for launching AI agents in terminal windows. This responsibility does not belong in the daemon — it should be handled by the client (CLI/desktop app). The daemon should remain a pure data layer.

## What to remove

### Server handlers

* `src/server/handlers/workspace_agent.rs` — `open_agent_in_terminal()` handler
* `src/server/handlers/workspace_agent_open.rs` — `open_workspace_and_terminal()` orchestration

### Terminal agent launching

* `src/workspace/terminal.rs` — `open_terminal_with_agent()` function
* `src/workspace/mod.rs` — re-export of `open_terminal_with_agent`

### gRPC API

* `OpenAgentInTerminal` RPC endpoint in `proto/centy/v1/centy.proto`
* `OpenAgentInTerminalRequest` and `OpenAgentInTerminalResponse` message types
* `WorkspaceMode` enum (if only used by the agent flow)

### gRPC trait implementation

* `src/server/trait_impl.rs` — `open_agent_in_terminal()` impl

### Configuration

* `workspace.update_status_on_open` setting in `src/config/mod.rs` (`WorkspaceConfig`) if it only serves the agent flow

### Documentation

* `.centy/docs/agent-manager.md` — agent manager design doc

## Notes

* `open_terminal()`, `is_terminal_available()`, and `open_platform_terminal()` in `terminal.rs` may also be candidates for removal if nothing else uses them after this cleanup
* Ensure no other handlers or CLI commands depend on the removed code before deleting
