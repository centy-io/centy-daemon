---
displayNumber: 205
status: closed
priority: 2
createdAt: 2026-02-22T16:23:58.535518+00:00
updatedAt: 2026-02-22T18:00:02.491373+00:00
---

# feat: establish ~/.config/centy/config.toml as user global config

## Summary

Introduce a single user-scope configuration file at `~/.config/centy/config.toml` as the canonical location for all user-level centy daemon settings.

## Motivation

Currently the daemon has no user-scope config file. All user-level state lives in `~/.centy/` as data files (registry, logs), but there is no mechanism for user-level settings/preferences. Establishing this file now provides a stable foundation for future features (e.g. configurable ignore paths, default org, etc.).

## Proposed Design

### File Location

`~/.config/centy/config.toml`

Follows the XDG Base Directory convention. On macOS, `~/.config/` is the de-facto standard for CLI tools.

### Loading Strategy

- Load at daemon startup (before serving requests)
- File is optional — if it doesn't exist, all defaults apply
- Use the `dirs` crate (already a dependency) to resolve the config dir: `dirs::config_dir()` returns `~/.config` on Linux/macOS and `%APPDATA%` on Windows
- Parse with `toml` crate

### Initial Schema

```toml
# ~/.config/centy/config.toml
# All fields are optional; defaults are shown as comments.

[registry]
# ignore_paths = []   # reserved for future use (issue #204)
```

The file starts intentionally minimal — just the skeleton and the `[registry]` section header — so issue #204 can fill in `ignore_paths`.

## Implementation Notes

- `dirs::config_dir()` is the right API (already using `dirs = "5"` in Cargo.toml)
- Existing `~/.centy/` data files (registry, logs) are unaffected — this is config only
- Add a `UserConfig` struct (e.g. `src/config.rs`) deserialized from TOML
- Load in `main.rs` and pass into `AppState` / `DaemonState`
- Write a unit test asserting defaults when file is absent
