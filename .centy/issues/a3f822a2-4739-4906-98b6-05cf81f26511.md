---
displayNumber: 185
status: open
priority: 2
createdAt: 2026-02-15T17:50:30.239685+00:00
updatedAt: 2026-02-15T17:50:30.239685+00:00
---

# Add CheckForUpdates gRPC endpoint

Create a new gRPC endpoint that exposes the daemon versions available for download from GitHub releases (centy-io/centy-daemon), and if there is a newer version available, optionally creates a centy issue about it in the project.

## Requirements

* New RPC `CheckForUpdates` in the Version RPCs section of the proto
* Fetch releases from GitHub API (`https://api.github.com/repos/centy-io/centy-daemon/releases`)
* Return current version, latest version, update_available flag, and list of all releases
* Accept `project_path` and `create_issue` flag - when both provided and update available, create an issue
* Duplicate issue prevention: check existing issues for `[centy-update:X.Y.Z]` tag in title before creating
* Add `reqwest` dependency for HTTP client (with json + rustls-tls features)
* Support optional `GITHUB_TOKEN` env var for higher GitHub API rate limits

## Files to create

* `src/github_releases.rs` - GitHub API client module
* `src/server/handlers/check_for_updates.rs` - gRPC handler

## Files to modify

* `Cargo.toml` - add reqwest dependency
* `proto/centy/v1/centy.proto` - new RPC + messages (CheckForUpdatesRequest, CheckForUpdatesResponse, ReleaseVersion)
* `src/lib.rs` - register github_releases module
* `src/server/handlers/mod.rs` - register handler
* `src/server/trait_impl.rs` - wire RPC to handler
* `src/server/error_mapping.rs` - add ToStructuredError for GitHubReleasesError
